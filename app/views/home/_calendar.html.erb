<div class="calendar-section max-w-4xl mx-auto mb-8">
  <%= month_calendar do |date| %>
    <%= link_to date.day,
                home_path(date: date),
                data: { turbo_frame: "stock_modal" } %>

    <!-- カレンダー上の残り10錠表示 -->
    <% medicines_with_stock.each do |medicine| %>
      <% display_stock = medicine.display_stock_on(date) %>
      <% if display_stock.present? %>
        <span class="block text-xs text-error leading-tight">
          <%= medicine.medicine.name %><%= display_stock %>錠
        </span>
      <% end %>
    <% end %>

    <!-- 通院予定の表示 -->
    <% schedules = consultation_schedules_by_date[date] || [] %>
    <% schedules.each do |schedule| %>
      <%= link_to hospital_path(schedule.hospital), class: "block text-xs text-blue-600 leading-tight hover:underline" do %>
        <%= schedule.hospital.name %>通院予定
      <% end%>
    <% end %>
  <% end %>
</div>