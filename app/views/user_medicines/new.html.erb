<div class="container mx-auto px-4 py-8">
  <div class="medicines-section max-w-4xl mx-auto mb-8">
    <div class="md:w-2/3 w-full">
      <h1 class="font-bold text-4xl text-center mb-6">新規登録</h1>

      <div class="bg-white rounded-lg shadow p-6">
        <%= form_with(model: @user_medicine) do |f| %>
          <%= render 'shared/error_messages', object: f.object %>

          <div class="mb-4" data-controller="autocomplete">
            <%= f.label :medicine_name, "薬名", class: "block text-sm font-bold mb-2" %>
            <div class="relative">
              <!-- input ターゲット -->
              <%= f.text_field :medicine_name,
                  class: "flex-1 border border-gray-300 rounded px-3 py-2 w-full",
                  autocomplete: "off",
                  data: {
                    autocomplete_target: "input",
                    action: "input->autocomplete#search"
                  } %>
              <!-- results ターゲット -->
              <div data-autocomplete-target="results"
                  class="absolute z-10 w-full bg-white border border-gray-300 rounded mt-1">
              </div>
            </div>
          </div>

          <div class="mb-4">
            <%= f.label :dosage_per_time, "1回の服薬量", class: "block text-sm font-bold mb-2" %>
            <div class="flex items-center">
              <%= f.number_field :dosage_per_time,
                  class: "flex-1 border border-gray-300 rounded px-3 py-2" %>
              <span class="ml-2 text-gray-700">錠</span>
            </div>

          <div class="mb-4">
            <%= f.label :prescribed_amount, "処方量", class: "block text-sm font-bold mt-2" %>
            <div class="flex items-center">
              <%= f.number_field :prescribed_amount,
                  placeholder: "追加する数量を入力",
                  min: 1,
                  class: "flex-1 border border-gray-300 rounded px-3 py-2" %>
              <span class="ml-2 text-gray-700">錠</span>
            </div>
          </div>

          <div class="mb-4">
            <%= f.label :date_of_prescription, "処方日", class: "block text-sm font-bold mb-2" %>
            <%= f.date_field :date_of_prescription,
                value: Date.today,
                max: Date.today,
                class: "w-full border border-gray-300 rounded px-3 py-2" %>
          </div>

          <div class="flex gap-4">
            <%= f.submit "薬を追加", class: "btn btn-primary flex-1" %>
            <%= link_to "戻る", user_medicines_path, class: "btn btn-neutral flex-1" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>